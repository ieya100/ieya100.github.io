<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }}</title>

  <style>
    /* ======= ROOT: GitHub colors ======= */
    .light-mode {
      --bg: #ffffff;
      --text: #24292e;
      --link: #0969da;
      --border: #d0d7de;

      --code-bg: #f6f8fa;
      --code-text: #24292e;
    }

    .dark-mode {
      --bg: #0d1117;
      --text: #c9d1d9;
      --link: #58a6ff;
      --border: #30363d;

      --code-bg: #161b22;
      --code-text: #c9d1d9;
    }

    /* ======= GLOBAL ======= */
    body, .markdown-body {
      background: var(--bg) !important;
      color: var(--text) !important;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      padding: 20px;
      max-width: 900px;
      margin: auto;
    }

    a { color: var(--link) !important; }

    hr { border-color: var(--border) !important; }

    blockquote {
      border-left: 4px solid var(--border) !important;
      padding-left: 10px;
      color: var(--text) !important;
    }

    table th, table td {
      border-color: var(--border) !important;
    }

    pre, code {
      background: var(--code-bg) !important;
      color: var(--code-text) !important;
    }

    /* ======= Toggle ======= */
    .theme-toggle {
      position: fixed;
      top: 15px;
      right: 15px;
      background: #222;
      color: #fff;
      border-radius: 8px;
      padding: 6px 10px;
      cursor: pointer;
      font-size: 14px;
      z-index: 9999;
      user-select: none;
    }
    .light-mode .theme-toggle {
      background: #ddd;
      color: #000;
    }
  </style>
</head>
<body>

<!-- Toggle -->
<div class="theme-toggle" onclick="toggleTheme()">üåô Dark Mode</div>

<!-- Page content -->
<main class="markdown-body">
  {{ content }}
</main>

<!-- Utterances -->
<script src="https://utteranc.es/client.js"
        repo="ieya100/ieya100.github.io"
        issue-term="pathname"
        theme="github-dark"
        crossorigin="anonymous"
        async></script>

<!-- Theme script -->
<script>
function applyTheme(theme) {
  document.documentElement.className = theme;
  localStorage.setItem("theme", theme);

  const ut = document.querySelector("iframe.utterances-frame");
  if (ut) {
    ut.contentWindow.postMessage(
      { type: "set-theme", theme: theme === "dark-mode" ? "github-dark" : "github-light" },
      "https://utteranc.es"
    );
  }

  const btn = document.querySelector(".theme-toggle");
  if (btn) {
    btn.innerHTML = theme === "dark-mode" ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
  }
}

function toggleTheme() {
  const cur = localStorage.getItem("theme") || "light-mode";
  const next = cur === "light-mode" ? "dark-mode" : "light-mode";
  applyTheme(next);
}

applyTheme(
  localStorage.getItem("theme") ||
  (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark-mode" : "light-mode")
);
</script>

</body>
</html>
